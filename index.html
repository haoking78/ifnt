<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>IFNT · 無限翻轉人生</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="app_icon_192.png">
  <link rel="apple-touch-icon" href="app_icon_192.png">
  <link rel="stylesheet" href="styles.css?v=2025-11-01-03">
</head>
<body>
  <header class="topbar">
    <img src="logo.png" alt="IFNT" class="logo">
    <h1>IFNT 無限翻轉人生 <span class="ver">v6.2.18</span></h1>
    <button id="exportCsvBtn" class="btn secondary">匯出 CSV</button>
  </header>

  <section id="goalCard" class="card">
    <div class="card-title">
      <span>🎯 目標設定：</span>
      <button id="toggleGoal" class="btn ghost small">展開 / 收合</button>
    </div>
    <div id="goalForm" class="goal-form">
      <div class="grid2">
        <label>招募目標<input id="goalRecruit" type="number" min="0" value="1"></label>
        <label>BV 目標<input id="goalBV" type="number" min="0" value="1500"></label>
        <label>IBV 目標<input id="goalIBV" type="number" min="0" value="300"></label>
      </div>
      <button id="saveGoals" class="btn">儲存目標</button>
      <div class="goal-now" id="goalNow">目前目標：招募 1人 / BV 1500 / IBV 300</div>
    </div>
    <div class="progress-wrap">
      <div class="p-row">
        <div class="p-label">招募</div>
        <div class="p-bar"><span id="pRecruit"></span></div>
        <div class="p-val" id="pRecruitVal">0%</div>
      </div>
      <div class="p-row">
        <div class="p-label">BV</div>
        <div class="p-bar"><span id="pBV"></span></div>
        <div class="p-val" id="pBVVal">0%</div>
      </div>
      <div class="p-row">
        <div class="p-label">IBV</div>
        <div class="p-bar"><span id="pIBV"></span></div>
        <div class="p-val" id="pIBVVal">0%</div>
      </div>
      <div class="p-note" id="pNote">招募 0/1 · BV 0/1500 · IBV 0/300</div>
    </div>
  </section>

  <nav class="tabs">
    <button data-tab="recruit" class="tab active">① 招募</button>
    <button data-tab="bv" class="tab">② BV</button>
    <button data-tab="ibv" class="tab">③ IBV</button>
    <button data-tab="list" class="tab">④ 312 名單</button>
  </nav>

  <main>
    <!-- Recruit -->
    <section id="tab-recruit" class="tabpane active">
      <div class="card">
        <h2>👥 招募進度</h2>
        <div class="grid2">
          <label>日期<input id="rDate" type="date"></label>
          <label>姓名<input id="rName" type="text" placeholder="輸入或留空"></label>
        </div>
        <button id="addRecruit" class="btn">新增 招募</button>
        <div class="summary">目前累計：<span id="rTotal">0</span> / <span id="goalRecruitShow">1</span></div>
        <table class="table" id="rTable">
          <thead><tr><th>#</th><th>日期</th><th>姓名</th><th>操作</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- BV -->
    <section id="tab-bv" class="tabpane">
      <div class="card">
        <h2>💼 零售 + 自購 <span id="bvGoalTitle">1500 BV</span></h2>
        <div class="grid2 samew">
          <label>日期<input id="bvDate" type="date"></label>
          <label>顧客姓名<input id="bvName" type="text" placeholder="可留空或輸入"></label>
        </div>
        <div class="grid2">
          <label>零售品項<input id="bvItem" type="text" placeholder="例如：平泰秀、OPC、NAD"></label>
          <label>BV 數量<input id="bvValue" type="number" min="0" placeholder="數值"></label>
        </div>
        <button id="addBV" class="btn">新增 BV</button>
        <div class="summary">目前累計：<span id="bvSum">0</span> / <span id="goalBVShow">1500</span></div>
        <table class="table" id="bvTable">
          <thead><tr><th>#</th><th>姓名</th><th>小計</th><th>筆數</th><th>查看</th><th>刪除</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- IBV -->
    <section id="tab-ibv" class="tabpane">
      <div class="card">
        <h2>🏠 家庭轉移消費 <span id="ibvGoalTitle">300 IBV</span></h2>
        <div class="grid2 samew">
          <label>日期<input id="ibvDate" type="date"></label>
          <label>姓名（或自己）<input id="ibvName" type="text" placeholder="可留空或輸入"></label>
        </div>
        <div class="grid2">
          <label>消費品項<input id="ibvItem" type="text" placeholder="例如：保健、家電、日用品"></label>
          <label>IBV 數量<input id="ibvValue" type="number" min="0" placeholder="數值"></label>
        </div>
        <button id="addIBV" class="btn">新增 IBV</button>
        <div class="summary">目前累計：<span id="ibvSum">0</span> / <span id="goalIBVShow">300</span></div>
        <table class="table" id="ibvTable">
          <thead><tr><th>#</th><th>姓名</th><th>小計</th><th>筆數</th><th>查看</th><th>刪除</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- 312 list -->
    <section id="tab-list" class="tabpane">
      <div class="card">
        <h2>📒 312 互動名單</h2>
        <div class="grid2 samew">
          <label>居住縣市<select id="citySelect">
            <option>基隆市</option><option>臺北市</option><option>新北市</option>
            <option>桃園市</option><option>新竹市</option><option>新竹縣</option>
            <option>苗栗縣</option><option>臺中市</option><option>彰化縣</option>
            <option>南投縣</option><option>雲林縣</option><option>嘉義市</option>
            <option>嘉義縣</option><option>臺南市</option><option>高雄市</option>
            <option>屏東縣</option><option>宜蘭縣</option><option>花蓮縣</option>
            <option>臺東縣</option><option>澎湖縣</option><option>金門縣</option><option>連江縣</option>
          </select></label>
          <label>姓名（可選清單或自行輸入）<input id="listName" type="text" placeholder="輸入或選擇姓名"></label>
        </div>
        <div class="grid2 samew">
          <label>族群 / 關係<input id="listGroup" type="text" placeholder="例如：同學、客戶、親戚"></label>
          <label>互動日期<input id="listDate" type="date"></label>
        </div>
        <label>互動情況 / 備註（可輸入很多內容）
          <textarea id="listNote" rows="3" placeholder="互動內容、需求、跟進事項…"></textarea>
        </label>
        <div class="grid2 samew">
          <button id="addList" class="btn">新增 / 累加互動</button>
          <button id="clearListInputs" class="btn ghost">清空欄位</button>
        </div>
        <table class="table" id="listTable">
          <thead><tr><th>#</th><th>縣市</th><th>姓名</th><th>族群</th><th>最近互動日</th><th>次數</th><th>操作</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div id="modal" class="modal hidden">
    <div class="modal-body">
      <div id="modalContent"></div>
      <div class="modal-actions">
        <button id="modalClose" class="btn">關閉</button>
      </div>
    </div>
  </div>

  <!-- Fireworks canvas -->
  <canvas id="fxCanvas" class="hidden"></canvas>
  <audio id="fxAudio" preload="auto">
    <source src="fireworks.mp3" type="audio/mpeg">
  </audio>

  <script src="app.js?v=2025-11-01-03"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js');
      });
    }
  </script>
</body>
</html>
