
<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>IFNT Â· ç„¡é™ç¿»è½‰äººç”Ÿ v6.2.4</title>
<link rel="manifest" href="./manifest.json">
<link rel="icon" href="./app_icon_192.png">
<meta name="theme-color" content="#0b3440">
<style>
:root{--bg:#08242c;--panel:#0f3641;--text:#e9f4f6;--muted:#a8c7cf;--accent:#1dd1a1;--warn:#ff6b6b;}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Noto Sans TC,Arial}
.wrap{max-width:980px;margin:28px auto;padding:0 14px}
.top{display:flex;align-items:center;gap:12px;margin-bottom:14px}
.top img{width:36px;height:36px}
.h1{font-size:22px;font-weight:800;letter-spacing:.1em}
.ver{margin-left:8px;padding:2px 8px;border-radius:10px;background:#0c4957;color:#9ce4ff;font-size:12px}
.tabs{display:flex;gap:12px;flex-wrap:wrap}
.tab{background:#0e2f38;border:1px solid #134754;border-radius:14px;padding:8px 14px;cursor:pointer;color:#bde9f4}
.tab.active{background:#156279;border-color:#1aa1c0;color:#fff}
.card{background:var(--panel);border:1px solid #144954;border-radius:16px;margin-top:18px;padding:14px}
.row{display:flex;gap:12px;flex-wrap:wrap}
.col{flex:1 1 260px}
label{display:block;margin:10px 2px 6px;color:#bfe1e8;font-size:13px}
input,select,textarea{width:100%;background:#0b2931;color:#e9f4f6;border:1px solid #1a525f;border-radius:10px;padding:12px;font-size:16px}
input[type=date]{padding:10px 12px}textarea{min-height:120px;resize:vertical}
.btn{background:#13836c;border:none;color:#fff;padding:10px 16px;border-radius:12px;font-size:16px;cursor:pointer}
.btn.ghost{background:#0b2931;border:1px solid #1a525f}
.btn.warn{background:#b62e3b}
.grid{width:100%;border-collapse:collapse;margin-top:10px}
.grid th,.grid td{border-bottom:1px dashed #1b5663;padding:10px;text-align:left}
.section-title{display:flex;align-items:center;gap:10px;margin:10px 0 6px 2px;font-size:18px;font-weight:800;letter-spacing:.03em}
.badge{display:inline-block;padding:.2rem .6rem;border-radius:.6rem;font-size:.85rem;font-weight:700;line-height:1;user-select:none;border:1px solid transparent;transition:all .28s ease}
.badge-green{background:#23c55e1a;color:#22c55e;border-color:#22c55e}
.badge-red{background:#ef44441a;color:#ef4444;border-color:#ef4444}
/* animated achieved */
.badge-achieved{position:relative;animation:pop .55s cubic-bezier(.25,1.4,.3,1),glow 2.2s ease-in-out infinite}
.badge-achieved::before{content:"";position:absolute;inset:-2px;border-radius:inherit;background:conic-gradient(#22c55e,#16a34a,#86efac,#22c55e);filter:blur(6px);opacity:.45;z-index:-1;animation:spin 1.6s linear infinite}
.badge-achieved::after{content:"ğŸ‰";position:absolute;top:-10px;right:-10px;font-size:18px;animation:bounce 1.2s ease-in-out infinite}
.confetti{pointer-events:none;position:fixed;inset:0 0 auto 0;height:0;z-index:55}
.confetti i{position:absolute;width:8px;height:14px;border-radius:2px;background:var(--c,#22c55e);left:var(--x,50%);top:0;transform:translateY(-10px) rotate(540deg);animation:fall .9s ease-out forwards}
@keyframes pop{0%{transform:scale(.8)}55%{transform:scale(1.08)}100%{transform:scale(1)}}
@keyframes glow{0%,100%{box-shadow:0 0 0 rgba(34,197,94,0)}50%{box-shadow:0 0 16px rgba(34,197,94,.35)}}
@keyframes spin{to{transform:rotate(1turn)}}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}
@keyframes fall{100%{transform:translateY(110vh) rotate(720deg);opacity:.2}}
.red{color:#ff6b6b}.green{color:#1dd1a1}
.note{color:#a8c7cf;font-size:12px;margin-top:6px}

/* settings modal */
#settingsModal{display:none;position:fixed;inset:0;z-index:60;background:rgba(0,0,0,.45)}
#settingsModal .box{max-width:520px;margin:10vh auto;background:#0f3641;border:1px solid #144954;border-radius:14px;padding:16px}
#fwCanvas{position:fixed;inset:0;pointer-events:none;z-index:58;display:none}
</style>
<script>
if('serviceWorker' in navigator){
  window.addEventListener('load',()=>{
    navigator.serviceWorker.register('./service-worker.js?v=v6.2.4-fireworks-trans').then(reg=>{
      if(reg.waiting) reg.waiting.postMessage({type:'SKIP_WAITING'});
      navigator.serviceWorker.addEventListener('controllerchange',()=>location.reload());
    });
  });
}
</script>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <img src="./logo.png" alt="logo"><div class="h1">IFNT Â· ç„¡é™ç¿»è½‰äººç”Ÿ</div><div class="ver">v6.2.4</div>
      <button id="btnExport" class="btn" style="margin-left:auto">åŒ¯å‡º CSV</button>
      <button id="btnOpenSettings" class="btn ghost" style="margin-left:8px">è¨­å®š</button>
    </div>

    <div class="tabs">
      <div class="tab active" data-tab="recruit">â‘  æ‹›å‹Ÿ 1 äºº</div>
      <div class="tab" data-tab="bv">â‘¡ é›¶å”®ï¼‹è‡ªè³¼ 1500 BV</div>
      <div class="tab" data-tab="ibv">â‘¢ å®¶åº­è½‰ç§» 300 IBV</div>
      <div class="tab" data-tab="list">â‘£ 312 äº’å‹•åå–®</div>
    </div>

    <section id="recruit" class="card">
      <div class="row"><div class="col"><label>æ—¥æœŸ</label><input id="rDate" type="date"></div>
      <div class="col"><label>æ‹›å‹Ÿå§“å</label><input id="rName" placeholder="è¼¸å…¥å§“å"></div></div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button id="btnAddRecruit" class="btn">æ–°å¢æ‹›å‹Ÿ</button>
        <button data-clear="recruit" class="btn ghost">æ¸…ç©ºæ¬„ä½</button>
      </div>
      <div class="note">ç´¯è¨ˆé” 1 äººå³å®Œæˆ</div>
      <table class="grid" id="rTable"><thead><tr><th>#</th><th>æ—¥æœŸ</th><th>å§“å</th><th>æ“ä½œ</th></tr></thead><tbody></tbody></table>
    </section>

    <section id="bv" class="card" style="display:none">
      <div class="section-title">â‘¡ é›¶å”®ï¼‹è‡ªè³¼ 1500 BV <span id="bvBadge" class="badge badge-red">è·é›¢ 1500</span></div>
      <div class="row">
        <div class="col"><label>æ—¥æœŸ</label><input id="bvDate" type="date"></div>
        <div class="col"><label>é¡§å®¢å§“åï¼ˆå¯ç•™ç©ºæˆ–è¼¸å…¥ï¼‰</label><input id="bvName" placeholder="å¯ç•™ç©ºæˆ–è¼¸å…¥"></div>
      </div>
      <div class="row">
        <div class="col"><label>é›¶å”®å“é …ï¼ˆè‡ªè¡Œè¼¸å…¥ï¼‰</label><input id="bvItem" placeholder="ä¾‹å¦‚ï¼šå¹³æ³°ç§€ã€OPCã€NAD"></div>
        <div class="col"><label>é›¶å”® BV</label><input id="bvValue" type="number" inputmode="decimal" placeholder="æ•¸å€¼"></div>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button id="btnAddBV" class="btn">æ–°å¢ BV</button>
        <button data-clear="bv" class="btn ghost">æ¸…ç©ºæ¬„ä½</button>
      </div>
      <table class="grid"><thead><tr><th>#</th><th>å§“å</th><th>ç­†æ•¸</th><th>å°è¨ˆBV</th><th>æ“ä½œ</th></tr></thead><tbody id="bvTbody"></tbody></table>
    </section>

    <section id="ibv" class="card" style="display:none">
      <div class="section-title">â‘¢ å®¶åº­è½‰ç§» 300 IBV <span id="ibvBadge" class="badge badge-red">è·é›¢ 300</span></div>
      <div class="row">
        <div class="col"><label>æ—¥æœŸ</label><input id="ibvDate" type="date"></div>
        <div class="col"><label>å§“åï¼ˆæˆ–è‡ªå·±ï¼‰</label><input id="ibvName" placeholder="å¯ç•™ç©ºæˆ–è¼¸å…¥"></div>
      </div>
      <div class="row">
        <div class="col"><label>æ¶ˆè²»å“é …ï¼ˆè‡ªè¡Œè¼¸å…¥ï¼‰</label><input id="ibvItem" placeholder="ä¾‹å¦‚ï¼šä¿å¥ã€å®¶é›»ã€æ—¥ç”¨å“"></div>
        <div class="col"><label>IBV</label><input id="ibvValue" type="number" inputmode="decimal" placeholder="æ•¸å€¼"></div>
      </div>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button id="btnAddIBV" class="btn">æ–°å¢ IBV</button>
        <button data-clear="ibv" class="btn ghost">æ¸…ç©ºæ¬„ä½</button>
      </div>
      <table class="grid"><thead><tr><th>#</th><th>å§“å</th><th>ç­†æ•¸</th><th>å°è¨ˆIBV</th><th>æ“ä½œ</th></tr></thead><tbody id="ibvTbody"></tbody></table>
    </section>

    <section id="list" class="card" style="display:none">
      <div class="row">
        <div class="col"><label>å±…ä½ç¸£å¸‚</label><select id="city"></select></div>
        <div class="col"><label>å§“åï¼ˆå¯é¸æ¸…å–®æˆ–è‡ªè¡Œè¼¸å…¥ï¼‰</label><input id="pName" placeholder="è¼¸å…¥æˆ–é¸æ“‡å§“å" list="nameList"><datalist id="nameList"></datalist></div>
      </div>
      <div class="row">
        <div class="col"><label>æ—ç¾¤ / é—œä¿‚</label><input id="pGroup" placeholder="ä¾‹å¦‚ï¼šåœ‹å°åŒå­¸ã€å®¢æˆ¶ã€è¦ªæˆš" list="groupList"><datalist id="groupList"></datalist></div>
        <div class="col"><label>äº’å‹•æ—¥æœŸ</label><input id="pDate" type="date"></div>
      </div>
      <label>äº’å‹•æƒ…æ³ / å‚™è¨»ï¼ˆå¯è¼¸å…¥å¾ˆå¤šå…§å®¹ï¼‰</label>
      <textarea id="pNote" placeholder="äº’å‹•å…§å®¹ã€éœ€æ±‚ã€è·Ÿé€²äº‹é …â€¦"></textarea>
      <div style="margin-top:10px;display:flex;gap:10px">
        <button id="btnAddLog" class="btn">æ–°å¢ / ç´¯åŠ äº’å‹•</button>
        <button data-clear="list" class="btn ghost">æ¸…ç©ºæ¬„ä½</button>
      </div>
      <table class="grid" id="peopleTable" style="margin-top:14px">
        <thead><tr><th>#</th><th>ç¸£å¸‚</th><th>å§“å</th><th>æ—ç¾¤</th><th>æœ€è¿‘äº’å‹•æ—¥</th><th>æ¬¡æ•¸</th><th>æ“ä½œ</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal">
    <div class="box">
      <h3 style="margin:0 0 6px 0">ç›®æ¨™è¨­å®š</h3>
      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:10px">
        <label style="flex:1 1 240px;display:block">
          <span style="font-size:13px;color:#bfe1e8">BV ç›®æ¨™</span>
          <input id="inpTargetBV" type="number" value="1500" style="width:100%;background:#0b2931;color:#e9f4f6;border:1px solid #1a525f;border-radius:10px;padding:10px">
        </label>
        <label style="flex:1 1 240px;display:block">
          <span style="font-size:13px;color:#bfe1e8">IBV ç›®æ¨™</span>
          <input id="inpTargetIBV" type="number" value="300" style="width:100%;background:#0b2931;color:#e9f4f6;border:1px solid #1a525f;border-radius:10px;padding:10px">
        </label>
      </div>
      <div style="margin-top:14px;display:flex;gap:8px;justify-content:flex-end">
        <button id="btnCloseSettings" class="btn ghost">å–æ¶ˆ</button>
        <button id="btnSaveSettings" class="btn">å„²å­˜</button>
      </div>
    </div>
  </div>

  <!-- Fireworks canvas -->
  <canvas id="fwCanvas"></canvas>

  <script src="./app.js" defer></script>
</body>
</html>
